## このプロジェクトについて

本プロジェクトは「条件付き市場（Conditional Funding Market: CFM）」の考え方を学ぶための、シミュレーションツールです。

CFM は、「あるプロジェクトに資金を投資した場合」と「投資しなかった場合」という 条件付きの未来 を比較し、その結果の差（インパクト）を予測するための予測市場モデルです

- 開発者: tkgshn（[@0xtkgshn](https://github.com/0xtkgshn)）
- ソースコード: [https://github.com/tkgshn/cfm](https://github.com/tkgshn/cfm)

## 条件付き市場と予測インパクト

![概要](/screenshot1.png)
各プロジェクトには 2 つの条件付き市場 が存在します。

- If Funded（資金を受け取った場合）
- If Not Funded（資金を受け取らなかった場合）

この 2 つの市場で予想される結果を比べることで、資金を受け取った場合・受け取らなかった場合の予測インパクトを算出することができます。

## スカラー市場について

CFM が使うのは スカラー市場（Scalar Market） と呼ばれる仕組みです。

- 通常のバイナリ市場（Yes/No）とは異なり、連続的な数値レンジ（例: 0〜10,000 件の申請数）を対象とする。
- レンジを [min, max] とすると、最終的な実測値 x は正規化して v = (x − min) / (max − min) に変換される。

- 清算時には

  - UP トークン = v USDC
  - DOWN トークン = (1−v) USDC
    として換金される。

- 取引時の価格は LMSR に基づき 0〜1 の確率値として表示され、UI 上ではレンジに換算して「予測件数」として表示される。

- この仕組みにより、CFM は「Yes/No」ではなく 「数値がどのくらいになるか」 を情報として集約できる。
- それぞれの市場はさらに UP（数値が増える）/ DOWN（数値が減る） のバイナリ市場に分割されます

今回のサンプル市場では、2 つの条件付き市場で「各プロジェクトがどれだけ社会保障制度の申請数を増加させられるか」を予測しています。

## 市場開始から政策決定、精算までの流れ
![概要](/screenshot2.png)
1. 市場開始
  - 各プロジェクトの If Funded / If Not Funded が開き、両方で取引可能。
  - 参加者は「資金あり」「資金なし」の両条件で未来の指標（例: 申請数）を予測。

2. 政策決定

- 予測インパクトが最大のプロジェクトが政策対象として選ばれる。
- 政策対象になったプロジェクトは、If Funded 市場が残り、他のプロジェクトは  Not Funded 市場のみ残る。
- 使われなくなる市場は Voided（無効化） となり、清算対象外に。

3. 精算フェーズ

- 政策を実施した後の結果をを参照し、実際の値を確定。
- 残った市場を清算し、UP/DOWN の保有シェアが v / 1−v の割合で支払われる。

## 今回の市場の場合


![概要](/screenshot3.png)
今回は、サンプルデータとして「それぞれの社会保障制度の診断プロジェクトに1億円を投資した場合の各プロジェクトの申請数を予測する」という市場をつくりました。

1. アスコエ
2. Civichat
3. お悩みハンドブック
4. みつもりヤドカリくん

各プロジェクトに「1億円を追加投資した場合」と「投資しない場合」の、それぞれにおける「資金配分から1カ月後の月間申請件数」を予測します。
